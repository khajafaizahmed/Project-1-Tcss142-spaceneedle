<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>TCSS 142 Â· Project 1 Tester â€” Space Needle</title>

<meta name="viewport" content="width=device-width, initial-scale=1">

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=JetBrains+Mono:wght@300;400;600&display=swap" rel="stylesheet">

<style>
/* =========================
   Theme variables
   ========================= */
:root {
  --bg-gradient: radial-gradient(circle at top, #181c3a 0%, #050810 55%, #02040a 100%);
  --card-bg: rgba(17, 24, 39, 0.9);
  --border: rgba(148, 163, 184, 0.35);
  --text-main: #e5e7eb;
  --text-muted: #9ca3af;
  --accent: #4ade80;
  --accent-warn: #fbbf24;
  --accent-error: #fb7185;
  --shadow: 0 22px 60px rgba(0,0,0,.75);
}

/* Light mode */
body[data-theme="light"] {
  --bg-gradient: radial-gradient(circle at top, #e0f2fe 0%, #f8fafc 55%, #e5e7eb 100%);
  --card-bg: rgba(255,255,255,.95);
  --border: rgba(148,163,184,.6);
  --text-main: #020617;
  --text-muted: #6b7280;
  --shadow: 0 18px 45px rgba(15,23,42,.2);
}

* { box-sizing: border-box; }

body {
  margin: 0;
  min-height: 100vh;
  font-family: Inter, system-ui, sans-serif;
  color: var(--text-main);
  background: var(--bg-gradient);
  overflow-x: hidden;
}

/* =========================
   Animated aurora background
   ========================= */
body::before {
  content: "";
  position: fixed;
  inset: -40%;
  background:
    radial-gradient(circle at 10% 20%, rgba(56,189,248,.25), transparent 45%),
    radial-gradient(circle at 80% 0%, rgba(168,85,247,.25), transparent 50%),
    radial-gradient(circle at 50% 100%, rgba(34,197,94,.25), transparent 55%);
  filter: blur(22px);
  animation: aurora 26s ease-in-out infinite alternate;
  z-index: -2;
}
@keyframes aurora {
  from { transform: translate(-3%, -2%) scale(1.03); }
  to   { transform: translate(3%, 2%) scale(1.06); }
}

/* =========================
   Layout
   ========================= */
.main {
  max-width: 1120px;
  margin: 28px auto;
  padding: 16px;
}

/* =========================
   Header
   ========================= */
.header {
  display: flex;
  justify-content: space-between;
  gap: 20px;
  margin-bottom: 20px;
}

.header h1 {
  margin: 0;
  font-size: clamp(26px, 4vw, 34px);
}

.header h1 span {
  background: linear-gradient(120deg, #4ade80, #38bdf8, #a855f7);
  -webkit-background-clip: text;
  color: transparent;
}

.subtitle {
  font-size: 14px;
  color: var(--text-muted);
  max-width: 620px;
}

.theme-toggle {
  border-radius: 999px;
  border: 1px solid var(--border);
  padding: 6px 12px;
  cursor: pointer;
  background: var(--card-bg);
}

/* =========================
   Grid
   ========================= */
.grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 16px;
}
@media (max-width: 900px) {
  .grid { grid-template-columns: 1fr; }
}

/* =========================
   Cards
   ========================= */
.card {
  background: var(--card-bg);
  border-radius: 18px;
  border: 1px solid var(--border);
  padding: 18px 20px;
  box-shadow: var(--shadow);
  backdrop-filter: blur(20px);
}

.card h2 {
  margin-top: 0;
  font-size: 16px;
}

.card p {
  font-size: 13px;
  color: var(--text-muted);
}

/* =========================
   Tester
   ========================= */
textarea {
  width: 100%;
  height: 260px;
  background: #020617;
  color: var(--text-main);
  font-family: "JetBrains Mono", monospace;
  border-radius: 10px;
  border: 1px solid var(--border);
  padding: 10px;
  resize: vertical;
}

.button-row {
  display: flex;
  gap: 10px;
  margin-top: 10px;
  flex-wrap: wrap;
}

button {
  border-radius: 999px;
  border: none;
  padding: 8px 18px;
  cursor: pointer;
  font-size: 13px;
  font-weight: 500;
}

button.run {
  background: linear-gradient(135deg, #4ade80, #38bdf8, #a855f7);
  color: #020617;
}

button.secondary {
  background: transparent;
  border: 1px dashed var(--border);
  color: var(--text-muted);
}

/* =========================
   Output
   ========================= */
.output {
  margin-top: 18px;
}

pre {
  background: #020617;
  padding: 12px;
  border-radius: 10px;
  border: 1px solid var(--border);
  overflow: auto;
  max-height: 300px;
  font-size: 12px;
}

/* =========================
   Footer
   ========================= */
.footer {
  margin-top: 14px;
  font-size: 11px;
  color: var(--text-muted);
  text-align: center;
}
</style>
</head>

<body>

<div class="main">

  <div class="header">
    <div>
      <h1><span>TCSS 142</span> Project 1 Tester</h1>
      <p class="subtitle">
        Paste your complete <code>Project1.java</code> file below.
        This tester compares your Space Needle output line-by-line
        against the official reference solution.
      </p>
    </div>
    <button class="theme-toggle" onclick="toggleTheme()">ðŸŒ™</button>
  </div>

  <div class="grid">

    <div class="card">
      <h2>How this tester works</h2>
      <p>
        â€¢ Compiles your program on the server<br>
        â€¢ Runs the official reference solution<br>
        â€¢ Compares output exactly (spacing matters)<br>
        â€¢ Reports the first mismatch with line number
      </p>
      <p style="margin-top:10px;">
        Instructor: Professor Xutong Liu<br>
        Built & maintained by TA Faiz Ahmed
      </p>
    </div>

    <div class="card">
      <h2>Paste Project1.java</h2>
      <textarea id="code" placeholder="// Paste your Project1.java here"></textarea>

      <div class="button-row">
        <button class="run" onclick="runTests()">â–¶ Run tests</button>
        <button class="secondary" onclick="clearAll()">Clear</button>
      </div>
    </div>

  </div>

  <div class="card output">
    <h2>Tester Output</h2>
    <pre id="out">(waitingâ€¦)</pre>
  </div>

  <div class="footer">
    This tester runs your code on a secure server.
    Passing here does not guarantee Canvas credit.
  </div>

</div>

<script>
function toggleTheme() {
  const cur = document.body.getAttribute("data-theme");
  document.body.setAttribute("data-theme", cur === "light" ? "dark" : "light");
}

async function runTests() {
  const code = document.getElementById("code").value;
  if (!code.trim()) {
    alert("Paste Project1.java first.");
    return;
  }
  document.getElementById("out").textContent = "Running tests...";
  const res = await fetch("/run", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ code })
  });
  document.getElementById("out").textContent = await res.text();
}

function clearAll() {
  document.getElementById("code").value = "";
  document.getElementById("out").textContent = "(waitingâ€¦)";
}
</script>

</body>
</html>
